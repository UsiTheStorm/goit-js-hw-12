{"version":3,"file":"index.js","sources":["../src/js/utilitis/toasts.js","../src/js/pixbay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Function to show a success toast\nexport const showSuccessToast = (message) => {\n    iziToast.success({\n        title: '✅',\n        // backgroundColor: '#a2d1e4',\n        message,\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n\n// Function to show an error toast\nexport const showErrorToast = (message) => {\n    iziToast.error({\n        title: '❌',\n        message,\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n\n// Function to show a warning toast\nexport const showWarningToast = (message) => {\n    iziToast.warning({\n        title: '',\n        message,\n        backgroundColor: '#a2dbe4',\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n","import axios from 'axios';\n\nconst API_KEY = '49754838-8d67938118f09bcabafca9026';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default async function getImagesByQuery(query, page = 1, perPage = 15) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        per_page: perPage,\n        page,\n    };\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n}\n","import GLightbox from 'glightbox';\nimport 'glightbox/dist/css/glightbox.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst submitBtn = document.querySelector('button[type=\"submit\"]');\n\nlet myGLightbox = null;\n\nconst glightboxOptions = {\n    selector: '.glightbox', // CSS selector for the gallery links\n    loop: true, // Enable looping through the gallery items\n    openEffect: 'zoom', // Effect to use when opening the lightbox\n};\n\n// Validate element\nfunction validateElement(element, name) {\n    if (!element) {\n        console.error(`${name} element not found in the DOM.`);\n        return false;\n    }\n    return true;\n}\n\n// Create alt text from tags\nfunction createAltTextFromTags(tags) {\n    if (!tags) {\n        return 'Gallery image';\n    }\n    return tags\n        .split(',')\n        .map((tag) => tag.trim())\n        .filter((tag) => tag.length > 0)\n        .slice(0, 3)\n        .join(',');\n}\n// Format number\nfunction formatNumberShort(number) {\n    const num = Number(number);\n    if (Number.isNaN(num)) {\n        return 'N/A';\n    }\n    if (num >= 1000000) {\n        return `${Math.floor(num / 1000000)}M`;\n    }\n    if (num >= 1000) {\n        return `${Math.floor(num / 1000)}K`;\n    }\n    return String(num);\n}\n\n// Set button loading\nexport function setBtnLoading(isLoading) {\n    if (isLoading) {\n        submitBtn.disabled = true;\n        submitBtn.textContent = 'Loading';\n    } else {\n        submitBtn.disabled = false;\n        submitBtn.textContent = 'Search';\n    }\n}\n\n// Create item of gallery\nfunction createGalleryItem({\n    largeImageURL: original,\n    webformatURL: preview,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n}) {\n    const altText = createAltTextFromTags(tags);\n\n    return /* html */ `<li class=\"gallery-item\">\n  <a class=\"gallery-link glightbox\" href=\"${original}\">\n      <img\n          class=\"gallery-image\"\n          src=\"${preview}\" \n          alt=\"${altText}\"\n          loading=\"lazy\"\n      />\n      <div class=\"info\">\n          <span class=\"info-item\">\n          <img src=\"icons/like.svg\" width=\"16\" alt=\"Like icon\">\n              ${formatNumberShort(likes)}\n          </span>\n          <span class=\"info-item\">\n          <img src=\"icons/view.svg\" width=\"16\" alt=\"View icon\">\n              ${formatNumberShort(views)}\n          </span>\n          <span class=\"info-item\">\n          <img src=\"icons/comment.svg\" width=\"16\" alt=\"Comment icon\">\n              ${formatNumberShort(comments)}\n          </span>\n          <span class=\"info-item\">\n          <img src=\"icons/download.svg\" width=\"16\" alt=\"Download icon\">\n              ${formatNumberShort(downloads)}\n          </span>\n      </div>\n  </a>\n  </li>`;\n}\n// Create gallery\nexport function createGallery(imagesArray) {\n    if (!validateElement(gallery, 'Gallery')) return;\n    const markup = imagesArray.map(createGalleryItem).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    // Initialize GLightbox with configuration options\n    if (myGLightbox) {\n        myGLightbox.destroy();\n    }\n    myGLightbox = GLightbox(glightboxOptions);\n}\n\n// Clear gallery\nexport function clearGallery() {\n    // Destroy GLightbox\n    if (myGLightbox) {\n        myGLightbox.destroy();\n        myGLightbox = null;\n    }\n\n    gallery.innerHTML = '';\n}\n\n// Show/hide loader\nexport function showLoader() {\n    if (!validateElement(loader, 'Loader')) return;\n    loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    if (!validateElement(loader, 'Loader')) return;\n    loader.classList.add('is-hidden');\n}\n","import { showErrorToast, showWarningToast } from './js/utilitis/toasts';\nimport getImagesByQuery from './js/pixbay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    setBtnLoading,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\n\nlet searchQuery;\nconst observerTarget = document.querySelector('.js-guard');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet hits = 0;\n\n// Infinity scroll\nasync function onScroll(entries, observer) {\n    const entry = entries[0];\n    if (entry.isIntersecting) {\n        console.log('Вжух Вантаж');\n        observer.unobserve(observerTarget);\n\n        currentPage += 1;\n\n        try {\n            const images = await getImagesByQuery(searchQuery, currentPage, perPage);\n\n            if (!images || !images.hits || images.hits.length === 0) {\n                showWarningToast('Thats all fellow kids');\n                return;\n            }\n            createGallery(images.hits);\n            hits += images.hits.length;\n\n            if (hits < images.totalHits) {\n                observer.observe(observerTarget);\n            } else {\n                showWarningToast('Thats all fellow kids');\n            }\n        } catch (error) {\n            showErrorToast('An error occurred while fetching images.');\n            console.error('Error fetching images:', error);\n        }\n    }\n}\nconst observer = new IntersectionObserver(onScroll, { rootMargin: '350px' });\n\n// Form submit\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const formData = new FormData(form);\n    searchQuery = formData.get('search-text').trim();\n\n    if (!searchQuery) {\n        showWarningToast('Please enter a search query.');\n        return;\n    }\n\n    hits = 0;\n    currentPage = 1;\n\n    observer.unobserve(observerTarget);\n\n    setBtnLoading(true);\n    clearGallery();\n    showLoader();\n    try {\n        const images = await getImagesByQuery(searchQuery, currentPage, perPage);\n\n        if (!images || !images.hits || images.hits.length === 0) {\n            showWarningToast('No images found');\n            return;\n        }\n        createGallery(images.hits);\n        hits += images.hits.length;\n\n        if (images.hits.length < images.totalHits) {\n            observer.observe(observerTarget);\n        }\n    } catch (error) {\n        showErrorToast('An error occurred while fetching images.');\n        console.error('Error fetching images:', error);\n    } finally {\n        hideLoader();\n        setBtnLoading(false);\n    }\n    event.target.reset();\n});\n"],"names":["showErrorToast","message","iziToast","showWarningToast","API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","params","axios","gallery","loader","submitBtn","myGLightbox","glightboxOptions","validateElement","element","name","createAltTextFromTags","tags","tag","formatNumberShort","number","num","setBtnLoading","isLoading","createGalleryItem","original","preview","likes","views","comments","downloads","altText","createGallery","imagesArray","markup","GLightbox","clearGallery","showLoader","hideLoader","form","searchQuery","observerTarget","currentPage","hits","onScroll","entries","observer","images","error","event"],"mappings":"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"}